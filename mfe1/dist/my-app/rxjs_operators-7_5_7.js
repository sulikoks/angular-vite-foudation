import{__values,__spreadArray,__read,__extends,__asyncGenerator,__generator,__await,__awaiter,__asyncValues}from"tslib";function isFunction(value){return"function"==typeof value}function hasLift(source){return isFunction(null==source?void 0:source.lift)}function operate(init){return function(source){if(hasLift(source))return source.lift(function(liftedSource){try{return init(liftedSource,this)}catch(err){this.error(err)}});throw new TypeError("Unable to lift unknown Observable type")}}var isArrayLike=function(x){return x&&"number"==typeof x.length&&"function"!=typeof x};function isPromise(value){return isFunction(null==value?void 0:value.then)}function createErrorClass(createImpl){var ctorFunc=createImpl(function(instance){Error.call(instance),instance.stack=new Error().stack});return ctorFunc.prototype=Object.create(Error.prototype),ctorFunc.prototype.constructor=ctorFunc,ctorFunc}var UnsubscriptionError=createErrorClass(function(_super){return function(errors){_super(this),this.message=errors?errors.length+" errors occurred during unsubscription:\n"+errors.map(function(err,i){return i+1+") "+err.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=errors}});function arrRemove(arr,item){if(arr){var index=arr.indexOf(item);0<=index&&arr.splice(index,1)}}var Subscription=function(){function Subscription(initialTeardown){this.initialTeardown=initialTeardown,this.closed=!1,this._parentage=null,this._finalizers=null}var empty;return Subscription.prototype.unsubscribe=function(){var e_1,_a,e_2,_b,errors;if(!this.closed){this.closed=!0;var _parentage=this._parentage;if(_parentage)if(this._parentage=null,Array.isArray(_parentage))try{for(var _parentage_1=__values(_parentage),_parentage_1_1=_parentage_1.next();!_parentage_1_1.done;_parentage_1_1=_parentage_1.next()){_parentage_1_1.value.remove(this)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_parentage_1_1&&!_parentage_1_1.done&&(_a=_parentage_1.return)&&_a.call(_parentage_1)}finally{if(e_1)throw e_1.error}}else _parentage.remove(this);var initialFinalizer=this.initialTeardown;if(isFunction(initialFinalizer))try{initialFinalizer()}catch(e){errors=e instanceof UnsubscriptionError?e.errors:[e]}var _finalizers=this._finalizers;if(_finalizers){this._finalizers=null;try{for(var _finalizers_1=__values(_finalizers),_finalizers_1_1=_finalizers_1.next();!_finalizers_1_1.done;_finalizers_1_1=_finalizers_1.next()){var finalizer=_finalizers_1_1.value;try{execFinalizer(finalizer)}catch(err){errors=null!=errors?errors:[],err instanceof UnsubscriptionError?errors=__spreadArray(__spreadArray([],__read(errors)),__read(err.errors)):errors.push(err)}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_finalizers_1_1&&!_finalizers_1_1.done&&(_b=_finalizers_1.return)&&_b.call(_finalizers_1)}finally{if(e_2)throw e_2.error}}}if(errors)throw new UnsubscriptionError(errors)}},Subscription.prototype.add=function(teardown){var _a;if(teardown&&teardown!==this)if(this.closed)execFinalizer(teardown);else{if(teardown instanceof Subscription){if(teardown.closed||teardown._hasParent(this))return;teardown._addParent(this)}(this._finalizers=null!==(_a=this._finalizers)&&void 0!==_a?_a:[]).push(teardown)}},Subscription.prototype._hasParent=function(parent){var _parentage=this._parentage;return _parentage===parent||Array.isArray(_parentage)&&_parentage.includes(parent)},Subscription.prototype._addParent=function(parent){var _parentage=this._parentage;this._parentage=Array.isArray(_parentage)?(_parentage.push(parent),_parentage):_parentage?[_parentage,parent]:parent},Subscription.prototype._removeParent=function(parent){var _parentage=this._parentage;_parentage===parent?this._parentage=null:Array.isArray(_parentage)&&arrRemove(_parentage,parent)},Subscription.prototype.remove=function(teardown){var _finalizers=this._finalizers;_finalizers&&arrRemove(_finalizers,teardown),teardown instanceof Subscription&&teardown._removeParent(this)},Subscription.EMPTY=((empty=new Subscription).closed=!0,empty),Subscription}(),EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(value){return value instanceof Subscription||value&&"closed"in value&&isFunction(value.remove)&&isFunction(value.add)&&isFunction(value.unsubscribe)}function execFinalizer(finalizer){isFunction(finalizer)?finalizer():finalizer.unsubscribe()}var config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider_setTimeout=function(handler,timeout){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];return setTimeout.apply(void 0,__spreadArray([handler,timeout],__read(args)))};function reportUnhandledError(err){timeoutProvider_setTimeout(function(){throw err})}function noop(){}function errorContext(cb){cb()}var Subscriber=function(_super){function Subscriber(destination){var _this=_super.call(this)||this;return _this.isStopped=!1,destination?(_this.destination=destination,isSubscription(destination)&&destination.add(_this)):_this.destination=EMPTY_OBSERVER,_this}return __extends(Subscriber,_super),Subscriber.create=function(next,error,complete){return new SafeSubscriber(next,error,complete)},Subscriber.prototype.next=function(value){this.isStopped||this._next(value)},Subscriber.prototype.error=function(err){this.isStopped||(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this),this.destination=null)},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){try{this.destination.error(err)}finally{this.unsubscribe()}},Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Subscriber}(Subscription),_bind=Function.prototype.bind;function bind(fn,thisArg){return _bind.call(fn,thisArg)}var ConsumerObserver=function(){function ConsumerObserver(partialObserver){this.partialObserver=partialObserver}return ConsumerObserver.prototype.next=function(value){var partialObserver=this.partialObserver;if(partialObserver.next)try{partialObserver.next(value)}catch(error){handleUnhandledError(error)}},ConsumerObserver.prototype.error=function(err){var partialObserver=this.partialObserver;if(partialObserver.error)try{partialObserver.error(err)}catch(error){handleUnhandledError(error)}else handleUnhandledError(err)},ConsumerObserver.prototype.complete=function(){var partialObserver=this.partialObserver;if(partialObserver.complete)try{partialObserver.complete()}catch(error){handleUnhandledError(error)}},ConsumerObserver}(),SafeSubscriber=function(_super){function SafeSubscriber(observerOrNext,error,complete){var partialObserver,context_1,_this=_super.call(this)||this;isFunction(observerOrNext)||!observerOrNext?partialObserver={next:null!=observerOrNext?observerOrNext:void 0,error:null!=error?error:void 0,complete:null!=complete?complete:void 0}:_this&&config.useDeprecatedNextContext?((context_1=Object.create(observerOrNext)).unsubscribe=function(){return _this.unsubscribe()},partialObserver={next:observerOrNext.next&&bind(observerOrNext.next,context_1),error:observerOrNext.error&&bind(observerOrNext.error,context_1),complete:observerOrNext.complete&&bind(observerOrNext.complete,context_1)}):partialObserver=observerOrNext;return _this.destination=new ConsumerObserver(partialObserver),_this}return __extends(SafeSubscriber,_super),SafeSubscriber}(Subscriber);function handleUnhandledError(error){reportUnhandledError(error)}var EMPTY_OBSERVER={closed:!0,next:noop,error:function(err){throw err},complete:noop},observable="function"==typeof Symbol&&Symbol.observable||"@@observable";function identity(x){return x}function pipe(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return pipeFromArray(fns)}function pipeFromArray(fns){return 0===fns.length?identity:1===fns.length?fns[0]:function(input){return fns.reduce(function(prev,fn){return fn(prev)},input)}}var Observable=function(){function Observable(subscribe){subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var value,_this=this,subscriber=(value=observerOrNext)&&value instanceof Subscriber||function(value){return value&&isFunction(value.next)&&isFunction(value.error)&&isFunction(value.complete)}(value)&&isSubscription(value)?observerOrNext:new SafeSubscriber(observerOrNext,error,complete);return errorContext(function(){var _a=_this,operator=_a.operator,source=_a.source;subscriber.add(operator?operator.call(subscriber,source):source?_this._subscribe(subscriber):_this._trySubscribe(subscriber))}),subscriber},Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){sink.error(err)}},Observable.prototype.forEach=function(next,promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))(function(resolve,reject){var subscriber=new SafeSubscriber({next:function(value){try{next(value)}catch(err){reject(err),subscriber.unsubscribe()}},error:reject,complete:resolve});_this.subscribe(subscriber)})},Observable.prototype._subscribe=function(subscriber){var _a;return null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber)},Observable.prototype[observable]=function(){return this},Observable.prototype.pipe=function(){for(var operations=[],_i=0;_i<arguments.length;_i++)operations[_i]=arguments[_i];return pipeFromArray(operations)(this)},Observable.prototype.toPromise=function(promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))(function(resolve,reject){var value;_this.subscribe(function(x){return value=x},function(err){return reject(err)},function(){return resolve(value)})})},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();function getPromiseCtor(promiseCtor){var _a;return null!==(_a=null!=promiseCtor?promiseCtor:config.Promise)&&void 0!==_a?_a:Promise}function isInteropObservable(input){return isFunction(input[observable])}function isAsyncIterable(obj){return Symbol.asyncIterator&&isFunction(null==obj?void 0:obj[Symbol.asyncIterator])}function createInvalidObservableTypeError(input){return new TypeError("You provided "+(null!==input&&"object"==typeof input?"an invalid object":"'"+input+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var iterator="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function isIterable(input){return isFunction(null==input?void 0:input[iterator])}function readableStreamLikeToAsyncGenerator(readableStream){return __asyncGenerator(this,arguments,function(){var reader,_a,value;return __generator(this,function(_b){switch(_b.label){case 0:reader=readableStream.getReader(),_b.label=1;case 1:_b.trys.push([1,,9,10]),_b.label=2;case 2:return[4,__await(reader.read())];case 3:return _a=_b.sent(),value=_a.value,_a.done?[4,__await(void 0)]:[3,5];case 4:return[2,_b.sent()];case 5:return[4,__await(value)];case 6:return[4,_b.sent()];case 7:return _b.sent(),[3,2];case 8:return[3,10];case 9:return reader.releaseLock(),[7];case 10:return[2];}})})}function isReadableStreamLike(obj){return isFunction(null==obj?void 0:obj.getReader)}function innerFrom(input){if(input instanceof Observable)return input;if(null!=input){if(isInteropObservable(input))return obj=input,new Observable(function(subscriber){var obs=obj[observable]();if(isFunction(obs.subscribe))return obs.subscribe(subscriber);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(isArrayLike(input))return array=input,new Observable(function(subscriber){for(var i=0;i<array.length&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.complete()});if(isPromise(input))return promise=input,new Observable(function(subscriber){promise.then(function(value){subscriber.closed||(subscriber.next(value),subscriber.complete())},function(err){return subscriber.error(err)}).then(null,reportUnhandledError)});if(isAsyncIterable(input))return fromAsyncIterable(input);if(isIterable(input))return iterable=input,new Observable(function(subscriber){var e_1,_a;try{for(var iterable_1=__values(iterable),iterable_1_1=iterable_1.next();!iterable_1_1.done;iterable_1_1=iterable_1.next()){var value=iterable_1_1.value;if(subscriber.next(value),subscriber.closed)return}}catch(e_1_1){e_1={error:e_1_1}}finally{try{iterable_1_1&&!iterable_1_1.done&&(_a=iterable_1.return)&&_a.call(iterable_1)}finally{if(e_1)throw e_1.error}}subscriber.complete()});if(isReadableStreamLike(input))return fromAsyncIterable(readableStreamLikeToAsyncGenerator(input))}var iterable,promise,array,obj;throw createInvalidObservableTypeError(input)}function fromAsyncIterable(asyncIterable){return new Observable(function(subscriber){(function(asyncIterable,subscriber){var asyncIterable_1,asyncIterable_1_1,e_2,_a;return __awaiter(this,void 0,void 0,function(){var value,e_2_1;return __generator(this,function(_b){switch(_b.label){case 0:_b.trys.push([0,5,6,11]),asyncIterable_1=__asyncValues(asyncIterable),_b.label=1;case 1:return[4,asyncIterable_1.next()];case 2:if((asyncIterable_1_1=_b.sent()).done)return[3,4];if(value=asyncIterable_1_1.value,subscriber.next(value),subscriber.closed)return[2];_b.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return e_2_1=_b.sent(),e_2={error:e_2_1},[3,11];case 6:return _b.trys.push([6,,9,10]),asyncIterable_1_1&&!asyncIterable_1_1.done&&(_a=asyncIterable_1.return)?[4,_a.call(asyncIterable_1)]:[3,8];case 7:_b.sent(),_b.label=8;case 8:return[3,10];case 9:if(e_2)throw e_2.error;return[7];case 10:return[7];case 11:return subscriber.complete(),[2];}})})})(asyncIterable,subscriber).catch(function(err){return subscriber.error(err)})})}function createOperatorSubscriber(destination,onNext,onComplete,onError,onFinalize){return new OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize)}var OperatorSubscriber=function(_super){function OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize,shouldUnsubscribe){var _this=_super.call(this,destination)||this;return _this.onFinalize=onFinalize,_this.shouldUnsubscribe=shouldUnsubscribe,_this._next=onNext?function(value){try{onNext(value)}catch(err){destination.error(err)}}:_super.prototype._next,_this._error=onError?function(err){try{onError(err)}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._error,_this._complete=onComplete?function(){try{onComplete()}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._complete,_this}return __extends(OperatorSubscriber,_super),OperatorSubscriber.prototype.unsubscribe=function(){var _a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var closed_1=this.closed;_super.prototype.unsubscribe.call(this),!closed_1&&(null===(_a=this.onFinalize)||void 0===_a||_a.call(this))}},OperatorSubscriber}(Subscriber);function audit(durationSelector){return operate(function(source,subscriber){var hasValue=!1,lastValue=null,durationSubscriber=null,isComplete=!1,endDuration=function(){if(null==durationSubscriber||durationSubscriber.unsubscribe(),durationSubscriber=null,hasValue){hasValue=!1;var value=lastValue;lastValue=null,subscriber.next(value)}isComplete&&subscriber.complete()},cleanupDuration=function(){durationSubscriber=null,isComplete&&subscriber.complete()};source.subscribe(createOperatorSubscriber(subscriber,function(value){hasValue=!0,lastValue=value,durationSubscriber||innerFrom(durationSelector(value)).subscribe(durationSubscriber=createOperatorSubscriber(subscriber,endDuration,cleanupDuration))},function(){isComplete=!0,(!hasValue||!durationSubscriber||durationSubscriber.closed)&&subscriber.complete()}))})}var Action=function(_super){function Action(scheduler,work){return _super.call(this)||this}return __extends(Action,_super),Action.prototype.schedule=function(state,delay){return this},Action}(Subscription),intervalProvider_setInterval=function(handler,timeout){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];return setInterval.apply(void 0,__spreadArray([handler,timeout],__read(args)))},intervalProvider_clearInterval=function(handle){return clearInterval(handle)},AsyncAction=function(_super){function AsyncAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this.pending=!1,_this}return __extends(AsyncAction,_super),AsyncAction.prototype.schedule=function(state,delay){var _a;if(void 0===delay&&(delay=0),this.closed)return this;this.state=state;var id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.pending=!0,this.delay=delay,this.id=null!==(_a=this.id)&&void 0!==_a?_a:this.requestAsyncId(scheduler,this.id,delay),this},AsyncAction.prototype.requestAsyncId=function(scheduler,_id,delay){return void 0===delay&&(delay=0),intervalProvider_setInterval(scheduler.flush.bind(scheduler,this),delay)},AsyncAction.prototype.recycleAsyncId=function(_scheduler,id,delay){if(void 0===delay&&(delay=0),null!=delay&&this.delay===delay&&!1===this.pending)return id;null!=id&&intervalProvider_clearInterval(id)},AsyncAction.prototype.execute=function(state,delay){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var error=this._execute(state,delay);if(error)return error;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(state,_delay){var errorValue,errored=!1;try{this.work(state)}catch(e){errored=!0,errorValue=e||new Error("Scheduled action threw falsy error")}if(errored)return this.unsubscribe(),errorValue},AsyncAction.prototype.unsubscribe=function(){if(!this.closed){var id=this.id,scheduler=this.scheduler,actions=scheduler.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove(actions,this),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null)),this.delay=null,_super.prototype.unsubscribe.call(this)}},AsyncAction}(Action),dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:void 0},Scheduler=function(){function Scheduler(schedulerActionCtor,now){void 0===now&&(now=Scheduler.now),this.schedulerActionCtor=schedulerActionCtor,this.now=now}return Scheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),new this.schedulerActionCtor(this,work).schedule(state,delay)},Scheduler.now=dateTimestampProvider.now,Scheduler}(),asyncScheduler=new(function(_super){function AsyncScheduler(SchedulerAction,now){void 0===now&&(now=Scheduler.now);var _this=_super.call(this,SchedulerAction,now)||this;return _this.actions=[],_this._active=!1,_this}return __extends(AsyncScheduler,_super),AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this._active)actions.push(action);else{var error;this._active=!0;do{if(error=action.execute(action.state,action.delay))break}while(action=actions.shift());if(this._active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}}},AsyncScheduler}(Scheduler))(AsyncAction),async=asyncScheduler;function isScheduler(value){return value&&isFunction(value.schedule)}function isValidDate(value){return value instanceof Date&&!isNaN(value)}function timer(dueTime,intervalOrScheduler,scheduler){void 0===dueTime&&(dueTime=0),void 0===scheduler&&(scheduler=async);var intervalDuration=-1;return null!=intervalOrScheduler&&(isScheduler(intervalOrScheduler)?scheduler=intervalOrScheduler:intervalDuration=intervalOrScheduler),new Observable(function(subscriber){var due=isValidDate(dueTime)?+dueTime-scheduler.now():dueTime;due<0&&(due=0);var n=0;return scheduler.schedule(function(){subscriber.closed||(subscriber.next(n++),0<=intervalDuration?this.schedule(void 0,intervalDuration):subscriber.complete())},due)})}function auditTime(duration,scheduler){return void 0===scheduler&&(scheduler=asyncScheduler),audit(function(){return timer(duration,scheduler)})}function buffer(closingNotifier){return operate(function(source,subscriber){var currentBuffer=[];return source.subscribe(createOperatorSubscriber(subscriber,function(value){return currentBuffer.push(value)},function(){subscriber.next(currentBuffer),subscriber.complete()})),closingNotifier.subscribe(createOperatorSubscriber(subscriber,function(){var b=currentBuffer;currentBuffer=[],subscriber.next(b)},noop)),function(){currentBuffer=null}})}function bufferCount(bufferSize,startBufferEvery){return void 0===startBufferEvery&&(startBufferEvery=null),startBufferEvery=null!=startBufferEvery?startBufferEvery:bufferSize,operate(function(source,subscriber){var buffers=[],count=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){var e_1,_a,e_2,_b,toEmit=null;count++%startBufferEvery==0&&buffers.push([]);try{for(var buffers_1=__values(buffers),buffers_1_1=buffers_1.next();!buffers_1_1.done;buffers_1_1=buffers_1.next()){(buffer=buffers_1_1.value).push(value),bufferSize<=buffer.length&&(toEmit=null!=toEmit?toEmit:[]).push(buffer)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{buffers_1_1&&!buffers_1_1.done&&(_a=buffers_1.return)&&_a.call(buffers_1)}finally{if(e_1)throw e_1.error}}if(toEmit)try{for(var toEmit_1=__values(toEmit),toEmit_1_1=toEmit_1.next();!toEmit_1_1.done;toEmit_1_1=toEmit_1.next()){var buffer=toEmit_1_1.value;arrRemove(buffers,buffer),subscriber.next(buffer)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{toEmit_1_1&&!toEmit_1_1.done&&(_b=toEmit_1.return)&&_b.call(toEmit_1)}finally{if(e_2)throw e_2.error}}},function(){var e_3,_a;try{for(var buffers_2=__values(buffers),buffers_2_1=buffers_2.next();!buffers_2_1.done;buffers_2_1=buffers_2.next()){var buffer=buffers_2_1.value;subscriber.next(buffer)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{buffers_2_1&&!buffers_2_1.done&&(_a=buffers_2.return)&&_a.call(buffers_2)}finally{if(e_3)throw e_3.error}}subscriber.complete()},void 0,function(){buffers=null}))})}function last$1(arr){return arr[arr.length-1]}function popResultSelector(args){return isFunction(last$1(args))?args.pop():void 0}function popScheduler(args){return isScheduler(last$1(args))?args.pop():void 0}function popNumber(args,defaultValue){return"number"==typeof last$1(args)?args.pop():defaultValue}function executeSchedule(parentSubscription,scheduler,work,delay,repeat){void 0===delay&&(delay=0),void 0===repeat&&(repeat=!1);var scheduleSubscription=scheduler.schedule(function(){work(),repeat?parentSubscription.add(this.schedule(null,delay)):this.unsubscribe()},delay);if(parentSubscription.add(scheduleSubscription),!repeat)return scheduleSubscription}function bufferTime(bufferTimeSpan){for(var _a,_b,otherArgs=[],_i=1;_i<arguments.length;_i++)otherArgs[_i-1]=arguments[_i];var scheduler=null!==(_a=popScheduler(otherArgs))&&void 0!==_a?_a:asyncScheduler,bufferCreationInterval=null!==(_b=otherArgs[0])&&void 0!==_b?_b:null,maxBufferSize=otherArgs[1]||1/0;return operate(function(source,subscriber){var bufferRecords=[],restartOnEmit=!1,emit=function(record){var buffer=record.buffer;record.subs.unsubscribe(),arrRemove(bufferRecords,record),subscriber.next(buffer),restartOnEmit&&startBuffer()},startBuffer=function(){if(bufferRecords){var subs=new Subscription;subscriber.add(subs);var record_1={buffer:[],subs:subs};bufferRecords.push(record_1),executeSchedule(subs,scheduler,function(){return emit(record_1)},bufferTimeSpan)}};null!==bufferCreationInterval&&bufferCreationInterval>=0?executeSchedule(subscriber,scheduler,startBuffer,bufferCreationInterval,!0):restartOnEmit=!0,startBuffer();var bufferTimeSubscriber=createOperatorSubscriber(subscriber,function(value){var e_1,_a,recordsCopy=bufferRecords.slice();try{for(var recordsCopy_1=__values(recordsCopy),recordsCopy_1_1=recordsCopy_1.next();!recordsCopy_1_1.done;recordsCopy_1_1=recordsCopy_1.next()){var record=recordsCopy_1_1.value,buffer=record.buffer;buffer.push(value),maxBufferSize<=buffer.length&&emit(record)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{recordsCopy_1_1&&!recordsCopy_1_1.done&&(_a=recordsCopy_1.return)&&_a.call(recordsCopy_1)}finally{if(e_1)throw e_1.error}}},function(){for(;null==bufferRecords?void 0:bufferRecords.length;)subscriber.next(bufferRecords.shift().buffer);null==bufferTimeSubscriber||bufferTimeSubscriber.unsubscribe(),subscriber.complete(),subscriber.unsubscribe()},void 0,function(){return bufferRecords=null});source.subscribe(bufferTimeSubscriber)})}function bufferToggle(openings,closingSelector){return operate(function(source,subscriber){var buffers=[];innerFrom(openings).subscribe(createOperatorSubscriber(subscriber,function(openValue){var buffer=[];buffers.push(buffer);var closingSubscription=new Subscription;closingSubscription.add(innerFrom(closingSelector(openValue)).subscribe(createOperatorSubscriber(subscriber,function(){arrRemove(buffers,buffer),subscriber.next(buffer),closingSubscription.unsubscribe()},noop)))},noop)),source.subscribe(createOperatorSubscriber(subscriber,function(value){var e_1,_a;try{for(var buffers_1=__values(buffers),buffers_1_1=buffers_1.next();!buffers_1_1.done;buffers_1_1=buffers_1.next()){buffers_1_1.value.push(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{buffers_1_1&&!buffers_1_1.done&&(_a=buffers_1.return)&&_a.call(buffers_1)}finally{if(e_1)throw e_1.error}}},function(){for(;buffers.length>0;)subscriber.next(buffers.shift());subscriber.complete()}))})}function bufferWhen(closingSelector){return operate(function(source,subscriber){var buffer=null,closingSubscriber=null,openBuffer=function(){null==closingSubscriber||closingSubscriber.unsubscribe();var b=buffer;buffer=[],b&&subscriber.next(b),innerFrom(closingSelector()).subscribe(closingSubscriber=createOperatorSubscriber(subscriber,openBuffer,noop))};openBuffer(),source.subscribe(createOperatorSubscriber(subscriber,function(value){return null==buffer?void 0:buffer.push(value)},function(){buffer&&subscriber.next(buffer),subscriber.complete()},void 0,function(){return buffer=closingSubscriber=null}))})}function catchError(selector){return operate(function(source,subscriber){var handledResult,innerSub=null,syncUnsub=!1;innerSub=source.subscribe(createOperatorSubscriber(subscriber,void 0,void 0,function(err){handledResult=innerFrom(selector(err,catchError(selector)(source))),innerSub?(innerSub.unsubscribe(),innerSub=null,handledResult.subscribe(subscriber)):syncUnsub=!0})),syncUnsub&&(innerSub.unsubscribe(),innerSub=null,handledResult.subscribe(subscriber))})}var isArray$2=Array.isArray,getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(args){if(1===args.length){var first_1=args[0];if(isArray$2(first_1))return{args:first_1,keys:null};if((obj=first_1)&&"object"==typeof obj&&getPrototypeOf(obj)===objectProto){var keys=getKeys(first_1);return{args:keys.map(function(key){return first_1[key]}),keys:keys}}}var obj;return{args:args,keys:null}}function observeOn(scheduler,delay){return void 0===delay&&(delay=0),operate(function(source,subscriber){source.subscribe(createOperatorSubscriber(subscriber,function(value){return executeSchedule(subscriber,scheduler,function(){return subscriber.next(value)},delay)},function(){return executeSchedule(subscriber,scheduler,function(){return subscriber.complete()},delay)},function(err){return executeSchedule(subscriber,scheduler,function(){return subscriber.error(err)},delay)}))})}function subscribeOn(scheduler,delay){return void 0===delay&&(delay=0),operate(function(source,subscriber){subscriber.add(scheduler.schedule(function(){return source.subscribe(subscriber)},delay))})}function scheduleAsyncIterable(input,scheduler){if(!input)throw new Error("Iterable cannot be null");return new Observable(function(subscriber){executeSchedule(subscriber,scheduler,function(){var iterator=input[Symbol.asyncIterator]();executeSchedule(subscriber,scheduler,function(){iterator.next().then(function(result){result.done?subscriber.complete():subscriber.next(result.value)})},0,!0)})})}function scheduled(input,scheduler){if(null!=input){if(isInteropObservable(input))return function(input,scheduler){return innerFrom(input).pipe(subscribeOn(scheduler),observeOn(scheduler))}(input,scheduler);if(isArrayLike(input))return function(input,scheduler){return new Observable(function(subscriber){var i=0;return scheduler.schedule(function(){i===input.length?subscriber.complete():(subscriber.next(input[i++]),subscriber.closed||this.schedule())})})}(input,scheduler);if(isPromise(input))return function(input,scheduler){return innerFrom(input).pipe(subscribeOn(scheduler),observeOn(scheduler))}(input,scheduler);if(isAsyncIterable(input))return scheduleAsyncIterable(input,scheduler);if(isIterable(input))return function(input,scheduler){return new Observable(function(subscriber){var iterator$1;return executeSchedule(subscriber,scheduler,function(){iterator$1=input[iterator](),executeSchedule(subscriber,scheduler,function(){var _a,value,done;try{value=(_a=iterator$1.next()).value,done=_a.done}catch(err){return void subscriber.error(err)}done?subscriber.complete():subscriber.next(value)},0,!0)}),function(){return isFunction(null==iterator$1?void 0:iterator$1.return)&&iterator$1.return()}})}(input,scheduler);if(isReadableStreamLike(input))return function(input,scheduler){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input),scheduler)}(input,scheduler)}throw createInvalidObservableTypeError(input)}function from(input,scheduler){return scheduler?scheduled(input,scheduler):innerFrom(input)}function map(project,thisArg){return operate(function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){subscriber.next(project.call(thisArg,value,index++))}))})}var isArray$1=Array.isArray;function mapOneOrManyArgs(fn){return map(function(args){return function(fn,args){return isArray$1(args)?fn.apply(void 0,__spreadArray([],__read(args))):fn(args)}(fn,args)})}function createObject(keys,values){return keys.reduce(function(result,key,i){return result[key]=values[i],result},{})}function combineLatest$1(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=popScheduler(args),resultSelector=popResultSelector(args),_a=argsArgArrayOrObject(args),observables=_a.args,keys=_a.keys;if(0===observables.length)return from([],scheduler);var result=new Observable(combineLatestInit(observables,scheduler,keys?function(values){return createObject(keys,values)}:identity));return resultSelector?result.pipe(mapOneOrManyArgs(resultSelector)):result}function combineLatestInit(observables,scheduler,valueTransform){return void 0===valueTransform&&(valueTransform=identity),function(subscriber){maybeSchedule(scheduler,function(){for(var length=observables.length,values=new Array(length),active=length,remainingFirstValues=length,_loop_1=function(i){maybeSchedule(scheduler,function(){var source=from(observables[i],scheduler),hasFirstValue=!1;source.subscribe(createOperatorSubscriber(subscriber,function(value){values[i]=value,hasFirstValue||(hasFirstValue=!0,remainingFirstValues--),remainingFirstValues||subscriber.next(valueTransform(values.slice()))},function(){--active||subscriber.complete()}))},subscriber)},i=0;i<length;i++)_loop_1(i)},subscriber)}}function maybeSchedule(scheduler,execute,subscription){scheduler?executeSchedule(subscription,scheduler,execute):execute()}function mergeInternals(source,subscriber,project,concurrent,onBeforeNext,expand,innerSubScheduler,additionalFinalizer){var buffer=[],active=0,index=0,isComplete=!1,checkComplete=function(){!isComplete||buffer.length||active||subscriber.complete()},outerNext=function(value){return active<concurrent?doInnerSub(value):buffer.push(value)},doInnerSub=function(value){expand&&subscriber.next(value),active++;var innerComplete=!1;innerFrom(project(value,index++)).subscribe(createOperatorSubscriber(subscriber,function(innerValue){null==onBeforeNext||onBeforeNext(innerValue),expand?outerNext(innerValue):subscriber.next(innerValue)},function(){innerComplete=!0},void 0,function(){if(innerComplete)try{active--;for(var _loop_1=function(){var bufferedValue=buffer.shift();innerSubScheduler?executeSchedule(subscriber,innerSubScheduler,function(){return doInnerSub(bufferedValue)}):doInnerSub(bufferedValue)};buffer.length&&active<concurrent;)_loop_1();checkComplete()}catch(err){subscriber.error(err)}}))};return source.subscribe(createOperatorSubscriber(subscriber,outerNext,function(){isComplete=!0,checkComplete()})),function(){null==additionalFinalizer||additionalFinalizer()}}function mergeMap(project,resultSelector,concurrent){return void 0===concurrent&&(concurrent=1/0),isFunction(resultSelector)?mergeMap(function(a,i){return map(function(b,ii){return resultSelector(a,b,i,ii)})(innerFrom(project(a,i)))},concurrent):("number"==typeof resultSelector&&(concurrent=resultSelector),operate(function(source,subscriber){return mergeInternals(source,subscriber,project,concurrent)}))}function scanInternals(accumulator,seed,hasSeed,emitOnNext,emitBeforeComplete){return function(source,subscriber){var hasState=hasSeed,state=seed,index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){var i=index++;state=hasState?accumulator(state,value,i):(hasState=!0,value),emitOnNext&&subscriber.next(state)},emitBeforeComplete&&function(){hasState&&subscriber.next(state),subscriber.complete()}))}}function reduce(accumulator,seed){return operate(scanInternals(accumulator,seed,arguments.length>=2,!1,!0))}var arrReducer=function(arr,value){return arr.push(value),arr};function toArray(){return operate(function(source,subscriber){reduce(arrReducer,[])(source).subscribe(subscriber)})}function joinAllInternals(joinFn,project){return pipe(toArray(),mergeMap(function(sources){return joinFn(sources)}),project?mapOneOrManyArgs(project):identity)}function combineLatestAll(project){return joinAllInternals(combineLatest$1,project)}var combineAll=combineLatestAll,isArray=Array.isArray;function argsOrArgArray(args){return 1===args.length&&isArray(args[0])?args[0]:args}function combineLatest(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var resultSelector=popResultSelector(args);return resultSelector?pipe(combineLatest.apply(void 0,__spreadArray([],__read(args))),mapOneOrManyArgs(resultSelector)):operate(function(source,subscriber){combineLatestInit(__spreadArray([source],__read(argsOrArgArray(args))))(subscriber)})}function combineLatestWith(){for(var otherSources=[],_i=0;_i<arguments.length;_i++)otherSources[_i]=arguments[_i];return combineLatest.apply(void 0,__spreadArray([],__read(otherSources)))}function mergeAll(concurrent){return void 0===concurrent&&(concurrent=1/0),mergeMap(identity,concurrent)}function concatAll(){return mergeAll(1)}function concat$1(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=popScheduler(args);return operate(function(source,subscriber){concatAll()(from(__spreadArray([source],__read(args)),scheduler)).subscribe(subscriber)})}function concatMap(project,resultSelector){return isFunction(resultSelector)?mergeMap(project,resultSelector,1):mergeMap(project,1)}function concatMapTo(innerObservable,resultSelector){return isFunction(resultSelector)?concatMap(function(){return innerObservable},resultSelector):concatMap(function(){return innerObservable})}function concatWith(){for(var otherSources=[],_i=0;_i<arguments.length;_i++)otherSources[_i]=arguments[_i];return concat$1.apply(void 0,__spreadArray([],__read(otherSources)))}var ObjectUnsubscribedError=createErrorClass(function(_super){return function(){_super(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(_super){function Subject(){var _this=_super.call(this)||this;return _this.closed=!1,_this.currentObservers=null,_this.observers=[],_this.isStopped=!1,_this.hasError=!1,_this.thrownError=null,_this}return __extends(Subject,_super),Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);return subject.operator=operator,subject},Subject.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},Subject.prototype.next=function(value){var _this=this;errorContext(function(){var e_1,_a;if(_this._throwIfClosed(),!_this.isStopped){_this.currentObservers||(_this.currentObservers=Array.from(_this.observers));try{for(var _b=__values(_this.currentObservers),_c=_b.next();!_c.done;_c=_b.next()){_c.value.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}})},Subject.prototype.error=function(err){var _this=this;errorContext(function(){if(_this._throwIfClosed(),!_this.isStopped){_this.hasError=_this.isStopped=!0,_this.thrownError=err;for(var observers=_this.observers;observers.length;)observers.shift().error(err)}})},Subject.prototype.complete=function(){var _this=this;errorContext(function(){if(_this._throwIfClosed(),!_this.isStopped){_this.isStopped=!0;for(var observers=_this.observers;observers.length;)observers.shift().complete()}})},Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(Subject.prototype,"observed",{get:function(){var _a;return(null===(_a=this.observers)||void 0===_a?void 0:_a.length)>0},enumerable:!1,configurable:!0}),Subject.prototype._trySubscribe=function(subscriber){return this._throwIfClosed(),_super.prototype._trySubscribe.call(this,subscriber)},Subject.prototype._subscribe=function(subscriber){return this._throwIfClosed(),this._checkFinalizedStatuses(subscriber),this._innerSubscribe(subscriber)},Subject.prototype._innerSubscribe=function(subscriber){var _this=this,hasError=this.hasError,isStopped=this.isStopped,observers=this.observers;return hasError||isStopped?EMPTY_SUBSCRIPTION:(this.currentObservers=null,observers.push(subscriber),new Subscription(function(){_this.currentObservers=null,arrRemove(observers,subscriber)}))},Subject.prototype._checkFinalizedStatuses=function(subscriber){var hasError=this.hasError,thrownError=this.thrownError,isStopped=this.isStopped;hasError?subscriber.error(thrownError):isStopped&&subscriber.complete()},Subject.prototype.asObservable=function(){var observable=new Observable;return observable.source=this,observable},Subject.create=function(destination,source){return new AnonymousSubject(destination,source)},Subject}(Observable),AnonymousSubject=function(_super){function AnonymousSubject(destination,source){var _this=_super.call(this)||this;return _this.destination=destination,_this.source=source,_this}return __extends(AnonymousSubject,_super),AnonymousSubject.prototype.next=function(value){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.next)||void 0===_b||_b.call(_a,value)},AnonymousSubject.prototype.error=function(err){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.error)||void 0===_b||_b.call(_a,err)},AnonymousSubject.prototype.complete=function(){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.complete)||void 0===_b||_b.call(_a)},AnonymousSubject.prototype._subscribe=function(subscriber){var _a,_b;return null!==(_b=null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber))&&void 0!==_b?_b:EMPTY_SUBSCRIPTION},AnonymousSubject}(Subject);var DEFAULT_CONFIG={connector:function(){return new Subject}};function connect(selector,config){void 0===config&&(config=DEFAULT_CONFIG);var connector=config.connector;return operate(function(source,subscriber){var subscribable,subject=connector();innerFrom(selector((subscribable=subject,new Observable(function(subscriber){return subscribable.subscribe(subscriber)})))).subscribe(subscriber),subscriber.add(source.subscribe(subject))})}function count(predicate){return reduce(function(total,value,i){return!predicate||predicate(value,i)?total+1:total},0)}function debounce(durationSelector){return operate(function(source,subscriber){var hasValue=!1,lastValue=null,durationSubscriber=null,emit=function(){if(null==durationSubscriber||durationSubscriber.unsubscribe(),durationSubscriber=null,hasValue){hasValue=!1;var value=lastValue;lastValue=null,subscriber.next(value)}};source.subscribe(createOperatorSubscriber(subscriber,function(value){null==durationSubscriber||durationSubscriber.unsubscribe(),hasValue=!0,lastValue=value,durationSubscriber=createOperatorSubscriber(subscriber,emit,noop),innerFrom(durationSelector(value)).subscribe(durationSubscriber)},function(){emit(),subscriber.complete()},void 0,function(){lastValue=durationSubscriber=null}))})}function debounceTime(dueTime,scheduler){return void 0===scheduler&&(scheduler=asyncScheduler),operate(function(source,subscriber){var activeTask=null,lastValue=null,lastTime=null,emit=function(){if(activeTask){activeTask.unsubscribe(),activeTask=null;var value=lastValue;lastValue=null,subscriber.next(value)}};function emitWhenIdle(){var targetTime=lastTime+dueTime,now=scheduler.now();if(now<targetTime)return activeTask=this.schedule(void 0,targetTime-now),void subscriber.add(activeTask);emit()}source.subscribe(createOperatorSubscriber(subscriber,function(value){lastValue=value,lastTime=scheduler.now(),activeTask||(activeTask=scheduler.schedule(emitWhenIdle,dueTime),subscriber.add(activeTask))},function(){emit(),subscriber.complete()},void 0,function(){lastValue=activeTask=null}))})}function defaultIfEmpty(defaultValue){return operate(function(source,subscriber){var hasValue=!1;source.subscribe(createOperatorSubscriber(subscriber,function(value){hasValue=!0,subscriber.next(value)},function(){hasValue||subscriber.next(defaultValue),subscriber.complete()}))})}function concat(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return concatAll()(from(args,popScheduler(args)))}var NotificationKind,EMPTY=new Observable(function(subscriber){return subscriber.complete()});function take(count){return count<=0?function(){return EMPTY}:operate(function(source,subscriber){var seen=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){++seen<=count&&(subscriber.next(value),count<=seen&&subscriber.complete())}))})}function ignoreElements(){return operate(function(source,subscriber){source.subscribe(createOperatorSubscriber(subscriber,noop))})}function mapTo(value){return map(function(){return value})}function delayWhen(delayDurationSelector,subscriptionDelay){return subscriptionDelay?function(source){return concat(subscriptionDelay.pipe(take(1),ignoreElements()),source.pipe(delayWhen(delayDurationSelector)))}:mergeMap(function(value,index){return delayDurationSelector(value,index).pipe(take(1),mapTo(value))})}function delay(due,scheduler){void 0===scheduler&&(scheduler=asyncScheduler);var duration=timer(due,scheduler);return delayWhen(function(){return duration})}function of(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=popScheduler(args);return from(args,scheduler)}!function(NotificationKind){NotificationKind.NEXT="N",NotificationKind.ERROR="E",NotificationKind.COMPLETE="C"}(NotificationKind||(NotificationKind={}));var Notification=function(){function Notification(kind,value,error){this.kind=kind,this.value=value,this.error=error,this.hasValue="N"===kind}return Notification.prototype.observe=function(observer){return observeNotification(this,observer)},Notification.prototype.do=function(nextHandler,errorHandler,completeHandler){var kind=this.kind,value=this.value,error=this.error;return"N"===kind?null==nextHandler?void 0:nextHandler(value):"E"===kind?null==errorHandler?void 0:errorHandler(error):null==completeHandler?void 0:completeHandler()},Notification.prototype.accept=function(nextOrObserver,error,complete){var _a;return isFunction(null===(_a=nextOrObserver)||void 0===_a?void 0:_a.next)?this.observe(nextOrObserver):this.do(nextOrObserver,error,complete)},Notification.prototype.toObservable=function(){var errorOrErrorFactory,scheduler,errorFactory,init,kind=this.kind,value=this.value,error=this.error,result="N"===kind?of(value):"E"===kind?(errorFactory=isFunction(errorOrErrorFactory=function(){return error})?errorOrErrorFactory:function(){return errorOrErrorFactory},init=function(subscriber){return subscriber.error(errorFactory())},new Observable(scheduler?function(subscriber){return scheduler.schedule(init,0,subscriber)}:init)):"C"===kind?EMPTY:0;if(!result)throw new TypeError("Unexpected notification kind "+kind);return result},Notification.createNext=function(value){return new Notification("N",value)},Notification.createError=function(err){return new Notification("E",void 0,err)},Notification.createComplete=function(){return Notification.completeNotification},Notification.completeNotification=new Notification("C"),Notification}();function observeNotification(notification,observer){var _a,_b,_c,_d=notification,kind=_d.kind,value=_d.value,error=_d.error;if("string"!=typeof kind)throw new TypeError("Invalid notification, missing \"kind\"");"N"===kind?null===(_a=observer.next)||void 0===_a||_a.call(observer,value):"E"===kind?null===(_b=observer.error)||void 0===_b||_b.call(observer,error):null===(_c=observer.complete)||void 0===_c||_c.call(observer)}function dematerialize(){return operate(function(source,subscriber){source.subscribe(createOperatorSubscriber(subscriber,function(notification){return observeNotification(notification,subscriber)}))})}function distinct(keySelector,flushes){return operate(function(source,subscriber){var distinctKeys=new Set;source.subscribe(createOperatorSubscriber(subscriber,function(value){var key=keySelector?keySelector(value):value;distinctKeys.has(key)||(distinctKeys.add(key),subscriber.next(value))})),null==flushes||flushes.subscribe(createOperatorSubscriber(subscriber,function(){return distinctKeys.clear()},noop))})}function distinctUntilChanged(comparator,keySelector){return void 0===keySelector&&(keySelector=identity),comparator=null!=comparator?comparator:defaultCompare,operate(function(source,subscriber){var previousKey,first=!0;source.subscribe(createOperatorSubscriber(subscriber,function(value){var currentKey=keySelector(value);!first&&comparator(previousKey,currentKey)||(first=!1,previousKey=currentKey,subscriber.next(value))}))})}function defaultCompare(a,b){return a===b}function distinctUntilKeyChanged(key,compare){return distinctUntilChanged(function(x,y){return compare?compare(x[key],y[key]):x[key]===y[key]})}var ArgumentOutOfRangeError=createErrorClass(function(_super){return function(){_super(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});function filter(predicate,thisArg){return operate(function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){return predicate.call(thisArg,value,index++)&&subscriber.next(value)}))})}var EmptyError=createErrorClass(function(_super){return function(){_super(this),this.name="EmptyError",this.message="no elements in sequence"}});function throwIfEmpty(errorFactory){return void 0===errorFactory&&(errorFactory=defaultErrorFactory),operate(function(source,subscriber){var hasValue=!1;source.subscribe(createOperatorSubscriber(subscriber,function(value){hasValue=!0,subscriber.next(value)},function(){return hasValue?subscriber.complete():subscriber.error(errorFactory())}))})}function defaultErrorFactory(){return new EmptyError}function elementAt(index,defaultValue){if(index<0)throw new ArgumentOutOfRangeError;var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe(filter(function(v,i){return i===index}),take(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return function(source){return concat(source,of.apply(void 0,__spreadArray([],__read(values))))}}function every(predicate,thisArg){return operate(function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){predicate.call(thisArg,value,index++,source)||(subscriber.next(!1),subscriber.complete())},function(){subscriber.next(!0),subscriber.complete()}))})}function exhaustMap(project,resultSelector){return resultSelector?function(source){return source.pipe(exhaustMap(function(a,i){return innerFrom(project(a,i)).pipe(map(function(b,ii){return resultSelector(a,b,i,ii)}))}))}:operate(function(source,subscriber){var index=0,innerSub=null,isComplete=!1;source.subscribe(createOperatorSubscriber(subscriber,function(outerValue){innerSub||(innerSub=createOperatorSubscriber(subscriber,void 0,function(){innerSub=null,isComplete&&subscriber.complete()}),innerFrom(project(outerValue,index++)).subscribe(innerSub))},function(){isComplete=!0,!innerSub&&subscriber.complete()}))})}function exhaustAll(){return exhaustMap(identity)}var exhaust=exhaustAll;function expand(project,concurrent,scheduler){return void 0===concurrent&&(concurrent=1/0),concurrent=(concurrent||0)<1?1/0:concurrent,operate(function(source,subscriber){return mergeInternals(source,subscriber,project,concurrent,void 0,!0,scheduler)})}function finalize(callback){return operate(function(source,subscriber){try{source.subscribe(subscriber)}finally{subscriber.add(callback)}})}function find(predicate,thisArg){return operate(createFind(predicate,thisArg,"value"))}function createFind(predicate,thisArg,emit){var findIndex="index"===emit;return function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){var i=index++;predicate.call(thisArg,value,i,source)&&(subscriber.next(findIndex?i:value),subscriber.complete())},function(){subscriber.next(findIndex?-1:void 0),subscriber.complete()}))}}function findIndex(predicate,thisArg){return operate(createFind(predicate,thisArg,"index"))}function first(predicate,defaultValue){var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe(predicate?filter(function(v,i){return predicate(v,i,source)}):identity,take(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty(function(){return new EmptyError}))}}function groupBy(keySelector,elementOrOptions,duration,connector){return operate(function(source,subscriber){var element;elementOrOptions&&"function"!=typeof elementOrOptions?(duration=elementOrOptions.duration,element=elementOrOptions.element,connector=elementOrOptions.connector):element=elementOrOptions;var groups=new Map,notify=function(cb){groups.forEach(cb),cb(subscriber)},handleError=function(err){return notify(function(consumer){return consumer.error(err)})},activeGroups=0,teardownAttempted=!1,groupBySourceSubscriber=new OperatorSubscriber(subscriber,function(value){try{var key_1=keySelector(value),group_1=groups.get(key_1);if(!group_1){groups.set(key_1,group_1=connector?connector():new Subject);var grouped=(key=key_1,groupSubject=group_1,(result=new Observable(function(groupSubscriber){activeGroups++;var innerSub=groupSubject.subscribe(groupSubscriber);return function(){innerSub.unsubscribe(),0==--activeGroups&&teardownAttempted&&groupBySourceSubscriber.unsubscribe()}})).key=key,result);if(subscriber.next(grouped),duration){var durationSubscriber_1=createOperatorSubscriber(group_1,function(){group_1.complete(),null==durationSubscriber_1||durationSubscriber_1.unsubscribe()},void 0,void 0,function(){return groups.delete(key_1)});groupBySourceSubscriber.add(innerFrom(duration(grouped)).subscribe(durationSubscriber_1))}}group_1.next(element?element(value):value)}catch(err){handleError(err)}var key,groupSubject,result},function(){return notify(function(consumer){return consumer.complete()})},handleError,function(){return groups.clear()},function(){return teardownAttempted=!0,0===activeGroups});source.subscribe(groupBySourceSubscriber)})}function isEmpty(){return operate(function(source,subscriber){source.subscribe(createOperatorSubscriber(subscriber,function(){subscriber.next(!1),subscriber.complete()},function(){subscriber.next(!0),subscriber.complete()}))})}function takeLast(count){return count<=0?function(){return EMPTY}:operate(function(source,subscriber){var buffer=[];source.subscribe(createOperatorSubscriber(subscriber,function(value){buffer.push(value),count<buffer.length&&buffer.shift()},function(){var e_1,_a;try{for(var buffer_1=__values(buffer),buffer_1_1=buffer_1.next();!buffer_1_1.done;buffer_1_1=buffer_1.next()){var value=buffer_1_1.value;subscriber.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{buffer_1_1&&!buffer_1_1.done&&(_a=buffer_1.return)&&_a.call(buffer_1)}finally{if(e_1)throw e_1.error}}subscriber.complete()},void 0,function(){buffer=null}))})}function last(predicate,defaultValue){var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe(predicate?filter(function(v,i){return predicate(v,i,source)}):identity,takeLast(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty(function(){return new EmptyError}))}}function materialize(){return operate(function(source,subscriber){source.subscribe(createOperatorSubscriber(subscriber,function(value){subscriber.next(Notification.createNext(value))},function(){subscriber.next(Notification.createComplete()),subscriber.complete()},function(err){subscriber.next(Notification.createError(err)),subscriber.complete()}))})}function max(comparer){return reduce(isFunction(comparer)?function(x,y){return comparer(x,y)>0?x:y}:function(x,y){return x>y?x:y})}function merge(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=popScheduler(args),concurrent=popNumber(args,1/0);return args=argsOrArgArray(args),operate(function(source,subscriber){mergeAll(concurrent)(from(__spreadArray([source],__read(args)),scheduler)).subscribe(subscriber)})}var flatMap=mergeMap;function mergeMapTo(innerObservable,resultSelector,concurrent){return void 0===concurrent&&(concurrent=1/0),isFunction(resultSelector)?mergeMap(function(){return innerObservable},resultSelector,concurrent):("number"==typeof resultSelector&&(concurrent=resultSelector),mergeMap(function(){return innerObservable},concurrent))}function mergeScan(accumulator,seed,concurrent){return void 0===concurrent&&(concurrent=1/0),operate(function(source,subscriber){var state=seed;return mergeInternals(source,subscriber,function(value,index){return accumulator(state,value,index)},concurrent,function(value){state=value},!1,void 0,function(){return state=null})})}function mergeWith(){for(var otherSources=[],_i=0;_i<arguments.length;_i++)otherSources[_i]=arguments[_i];return merge.apply(void 0,__spreadArray([],__read(otherSources)))}function min(comparer){return reduce(isFunction(comparer)?function(x,y){return comparer(x,y)<0?x:y}:function(x,y){return x<y?x:y})}function refCount(){return operate(function(source,subscriber){var connection=null;source._refCount++;var refCounter=createOperatorSubscriber(subscriber,void 0,void 0,void 0,function(){if(!source||source._refCount<=0||0<--source._refCount)connection=null;else{var sharedConnection=source._connection,conn=connection;connection=null,!sharedConnection||conn&&sharedConnection!==conn||sharedConnection.unsubscribe(),subscriber.unsubscribe()}});source.subscribe(refCounter),refCounter.closed||(connection=source.connect())})}var ConnectableObservable=function(_super){function ConnectableObservable(source,subjectFactory){var _this=_super.call(this)||this;return _this.source=source,_this.subjectFactory=subjectFactory,_this._subject=null,_this._refCount=0,_this._connection=null,hasLift(source)&&(_this.lift=source.lift),_this}return __extends(ConnectableObservable,_super),ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber)},ConnectableObservable.prototype.getSubject=function(){var subject=this._subject;return subject&&!subject.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype._teardown=function(){this._refCount=0;var _connection=this._connection;this._subject=this._connection=null,null==_connection||_connection.unsubscribe()},ConnectableObservable.prototype.connect=function(){var _this=this,connection=this._connection;if(!connection){connection=this._connection=new Subscription;var subject_1=this.getSubject();connection.add(this.source.subscribe(createOperatorSubscriber(subject_1,void 0,function(){_this._teardown(),subject_1.complete()},function(err){_this._teardown(),subject_1.error(err)},function(){return _this._teardown()}))),connection.closed&&(this._connection=null,connection=Subscription.EMPTY)}return connection},ConnectableObservable.prototype.refCount=function(){return refCount()(this)},ConnectableObservable}(Observable);function multicast(subjectOrSubjectFactory,selector){var subjectFactory=isFunction(subjectOrSubjectFactory)?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory};return isFunction(selector)?connect(selector,{connector:subjectFactory}):function(source){return new ConnectableObservable(source,subjectFactory)}}function onErrorResumeNext(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i]=arguments[_i];var nextSources=argsOrArgArray(sources);return operate(function(source,subscriber){var remaining=__spreadArray([source],__read(nextSources)),subscribeNext=function(){if(!subscriber.closed)if(remaining.length>0){var nextSource=void 0;try{nextSource=innerFrom(remaining.shift())}catch(err){return void subscribeNext()}var innerSub=createOperatorSubscriber(subscriber,void 0,noop,noop);nextSource.subscribe(innerSub),innerSub.add(subscribeNext)}else subscriber.complete()};subscribeNext()})}function pairwise(){return operate(function(source,subscriber){var prev,hasPrev=!1;source.subscribe(createOperatorSubscriber(subscriber,function(value){var p=prev;prev=value,hasPrev&&subscriber.next([p,value]),hasPrev=!0}))})}function not(pred,thisArg){return function(value,index){return!pred.call(thisArg,value,index)}}function partition(predicate,thisArg){return function(source){return[filter(predicate,thisArg)(source),filter(not(predicate,thisArg))(source)]}}function pluck(){for(var properties=[],_i=0;_i<arguments.length;_i++)properties[_i]=arguments[_i];var length=properties.length;if(0===length)throw new Error("list of properties cannot be empty.");return map(function(x){for(var currentProp=x,i=0;i<length;i++){var p=null==currentProp?void 0:currentProp[properties[i]];if(void 0===p)return;currentProp=p}return currentProp})}function publish(selector){return selector?function(source){return connect(selector)(source)}:function(source){return multicast(new Subject)(source)}}var BehaviorSubject=function(_super){function BehaviorSubject(_value){var _this=_super.call(this)||this;return _this._value=_value,_this}return __extends(BehaviorSubject,_super),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return!subscription.closed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype.getValue=function(){var hasError=this.hasError,thrownError=this.thrownError,_value=this._value;if(hasError)throw thrownError;return this._throwIfClosed(),_value},BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)},BehaviorSubject}(Subject);function publishBehavior(initialValue){return function(source){var subject=new BehaviorSubject(initialValue);return new ConnectableObservable(source,function(){return subject})}}var AsyncSubject=function(_super){function AsyncSubject(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._value=null,_this._hasValue=!1,_this._isComplete=!1,_this}return __extends(AsyncSubject,_super),AsyncSubject.prototype._checkFinalizedStatuses=function(subscriber){var _a=this,hasError=_a.hasError,_hasValue=_a._hasValue,_value=_a._value,thrownError=_a.thrownError,isStopped=_a.isStopped,_isComplete=_a._isComplete;hasError?subscriber.error(thrownError):(isStopped||_isComplete)&&(_hasValue&&subscriber.next(_value),subscriber.complete())},AsyncSubject.prototype.next=function(value){this.isStopped||(this._value=value,this._hasValue=!0)},AsyncSubject.prototype.complete=function(){var _hasValue=this._hasValue,_value=this._value;this._isComplete||(this._isComplete=!0,_hasValue&&_super.prototype.next.call(this,_value),_super.prototype.complete.call(this))},AsyncSubject}(Subject);function publishLast(){return function(source){var subject=new AsyncSubject;return new ConnectableObservable(source,function(){return subject})}}var ReplaySubject=function(_super){function ReplaySubject(_bufferSize,_windowTime,_timestampProvider){void 0===_bufferSize&&(_bufferSize=1/0),void 0===_windowTime&&(_windowTime=1/0),void 0===_timestampProvider&&(_timestampProvider=dateTimestampProvider);var _this=_super.call(this)||this;return _this._bufferSize=_bufferSize,_this._windowTime=_windowTime,_this._timestampProvider=_timestampProvider,_this._buffer=[],_this._infiniteTimeWindow=!0,_this._infiniteTimeWindow=_windowTime===1/0,_this._bufferSize=Math.max(1,_bufferSize),_this._windowTime=Math.max(1,_windowTime),_this}return __extends(ReplaySubject,_super),ReplaySubject.prototype.next=function(value){var _a=this,isStopped=_a.isStopped,_buffer=_a._buffer,_infiniteTimeWindow=_a._infiniteTimeWindow,_timestampProvider=_a._timestampProvider,_windowTime=_a._windowTime;isStopped||(_buffer.push(value),!_infiniteTimeWindow&&_buffer.push(_timestampProvider.now()+_windowTime)),this._trimBuffer(),_super.prototype.next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){this._throwIfClosed(),this._trimBuffer();for(var subscription=this._innerSubscribe(subscriber),_infiniteTimeWindow=this._infiniteTimeWindow,copy=this._buffer.slice(),i=0;i<copy.length&&!subscriber.closed;i+=_infiniteTimeWindow?1:2)subscriber.next(copy[i]);return this._checkFinalizedStatuses(subscriber),subscription},ReplaySubject.prototype._trimBuffer=function(){var _bufferSize=this._bufferSize,_timestampProvider=this._timestampProvider,_buffer=this._buffer,_infiniteTimeWindow=this._infiniteTimeWindow,adjustedBufferSize=(_infiniteTimeWindow?1:2)*_bufferSize;if(_bufferSize<1/0&&adjustedBufferSize<_buffer.length&&_buffer.splice(0,_buffer.length-adjustedBufferSize),!_infiniteTimeWindow){for(var now=_timestampProvider.now(),last=0,i=1;i<_buffer.length&&_buffer[i]<=now;i+=2)last=i;last&&_buffer.splice(0,last+1)}},ReplaySubject}(Subject);function publishReplay(bufferSize,windowTime,selectorOrScheduler,timestampProvider){selectorOrScheduler&&!isFunction(selectorOrScheduler)&&(timestampProvider=selectorOrScheduler);var selector=isFunction(selectorOrScheduler)?selectorOrScheduler:void 0;return function(source){return multicast(new ReplaySubject(bufferSize,windowTime,timestampProvider),selector)(source)}}function raceInit(sources){return function(subscriber){for(var subscriptions=[],_loop_1=function(i){subscriptions.push(innerFrom(sources[i]).subscribe(createOperatorSubscriber(subscriber,function(value){if(subscriptions){for(var s=0;s<subscriptions.length;s++)s!==i&&subscriptions[s].unsubscribe();subscriptions=null}subscriber.next(value)})))},i=0;subscriptions&&!subscriber.closed&&i<sources.length;i++)_loop_1(i)}}function raceWith(){for(var otherSources=[],_i=0;_i<arguments.length;_i++)otherSources[_i]=arguments[_i];return otherSources.length?operate(function(source,subscriber){raceInit(__spreadArray([source],__read(otherSources)))(subscriber)}):identity}function race(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return raceWith.apply(void 0,__spreadArray([],__read(argsOrArgArray(args))))}function repeat(countOrConfig){var _a,delay,count=1/0;return null!=countOrConfig&&("object"==typeof countOrConfig?(_a=countOrConfig.count,count=void 0===_a?1/0:_a,delay=countOrConfig.delay):count=countOrConfig),count<=0?function(){return EMPTY}:operate(function(source,subscriber){var sourceSub,soFar=0,resubscribe=function(){if(null==sourceSub||sourceSub.unsubscribe(),sourceSub=null,null!=delay){var notifier="number"==typeof delay?timer(delay):innerFrom(delay(soFar)),notifierSubscriber_1=createOperatorSubscriber(subscriber,function(){notifierSubscriber_1.unsubscribe(),subscribeToSource()});notifier.subscribe(notifierSubscriber_1)}else subscribeToSource()},subscribeToSource=function(){var syncUnsub=!1;sourceSub=source.subscribe(createOperatorSubscriber(subscriber,void 0,function(){++soFar<count?sourceSub?resubscribe():syncUnsub=!0:subscriber.complete()})),syncUnsub&&resubscribe()};subscribeToSource()})}function repeatWhen(notifier){return operate(function(source,subscriber){var innerSub,completions$,syncResub=!1,isNotifierComplete=!1,isMainComplete=!1,checkComplete=function(){return isMainComplete&&isNotifierComplete&&(subscriber.complete(),!0)},subscribeForRepeatWhen=function(){isMainComplete=!1,innerSub=source.subscribe(createOperatorSubscriber(subscriber,void 0,function(){isMainComplete=!0,!checkComplete()&&(completions$||(completions$=new Subject,notifier(completions$).subscribe(createOperatorSubscriber(subscriber,function(){innerSub?subscribeForRepeatWhen():syncResub=!0},function(){isNotifierComplete=!0,checkComplete()}))),completions$).next()})),syncResub&&(innerSub.unsubscribe(),innerSub=null,syncResub=!1,subscribeForRepeatWhen())};subscribeForRepeatWhen()})}function retry(configOrCount){var config;void 0===configOrCount&&(configOrCount=1/0);var _a=(config=configOrCount&&"object"==typeof configOrCount?configOrCount:{count:configOrCount}).count,count=void 0===_a?1/0:_a,delay=config.delay,_b=config.resetOnSuccess,resetOnSuccess=void 0!==_b&&_b;return count<=0?identity:operate(function(source,subscriber){var innerSub,soFar=0,subscribeForRetry=function(){var syncUnsub=!1;innerSub=source.subscribe(createOperatorSubscriber(subscriber,function(value){resetOnSuccess&&(soFar=0),subscriber.next(value)},void 0,function(err){if(soFar++<count){var resub_1=function(){innerSub?(innerSub.unsubscribe(),innerSub=null,subscribeForRetry()):syncUnsub=!0};if(null!=delay){var notifier="number"==typeof delay?timer(delay):innerFrom(delay(err,soFar)),notifierSubscriber_1=createOperatorSubscriber(subscriber,function(){notifierSubscriber_1.unsubscribe(),resub_1()},function(){subscriber.complete()});notifier.subscribe(notifierSubscriber_1)}else resub_1()}else subscriber.error(err)})),syncUnsub&&(innerSub.unsubscribe(),innerSub=null,subscribeForRetry())};subscribeForRetry()})}function retryWhen(notifier){return operate(function(source,subscriber){var innerSub,errors$,syncResub=!1,subscribeForRetryWhen=function(){innerSub=source.subscribe(createOperatorSubscriber(subscriber,void 0,void 0,function(err){errors$||(errors$=new Subject,notifier(errors$).subscribe(createOperatorSubscriber(subscriber,function(){return innerSub?subscribeForRetryWhen():syncResub=!0}))),errors$&&errors$.next(err)})),syncResub&&(innerSub.unsubscribe(),innerSub=null,syncResub=!1,subscribeForRetryWhen())};subscribeForRetryWhen()})}function sample(notifier){return operate(function(source,subscriber){var hasValue=!1,lastValue=null;source.subscribe(createOperatorSubscriber(subscriber,function(value){hasValue=!0,lastValue=value})),notifier.subscribe(createOperatorSubscriber(subscriber,function(){if(hasValue){hasValue=!1;var value=lastValue;lastValue=null,subscriber.next(value)}},noop))})}function sampleTime(period,scheduler){return void 0===scheduler&&(scheduler=asyncScheduler),sample(function(period,scheduler){return void 0===period&&(period=0),void 0===scheduler&&(scheduler=asyncScheduler),period<0&&(period=0),timer(period,period,scheduler)}(period,scheduler))}function scan(accumulator,seed){return operate(scanInternals(accumulator,seed,arguments.length>=2,!0))}function sequenceEqual(compareTo,comparator){return void 0===comparator&&(comparator=function(a,b){return a===b}),operate(function(source,subscriber){var aState={buffer:[],complete:!1},bState={buffer:[],complete:!1},emit=function(isEqual){subscriber.next(isEqual),subscriber.complete()},createSubscriber=function(selfState,otherState){var sequenceEqualSubscriber=createOperatorSubscriber(subscriber,function(a){var buffer=otherState.buffer,complete=otherState.complete;0===buffer.length?complete?emit(!1):selfState.buffer.push(a):!comparator(a,buffer.shift())&&emit(!1)},function(){selfState.complete=!0;var complete=otherState.complete,buffer=otherState.buffer;complete&&emit(0===buffer.length),null==sequenceEqualSubscriber||sequenceEqualSubscriber.unsubscribe()});return sequenceEqualSubscriber};source.subscribe(createSubscriber(aState,bState)),compareTo.subscribe(createSubscriber(bState,aState))})}function share(options){void 0===options&&(options={});var _a=options.connector,connector=void 0===_a?function(){return new Subject}:_a,_b=options.resetOnError,resetOnError=void 0===_b||_b,_c=options.resetOnComplete,resetOnComplete=void 0===_c||_c,_d=options.resetOnRefCountZero,resetOnRefCountZero=void 0===_d||_d;return function(wrapperSource){var connection,resetConnection,subject,refCount=0,hasCompleted=!1,hasErrored=!1,cancelReset=function(){null==resetConnection||resetConnection.unsubscribe(),resetConnection=void 0},reset=function(){cancelReset(),connection=subject=void 0,hasCompleted=hasErrored=!1},resetAndUnsubscribe=function(){var conn=connection;reset(),null==conn||conn.unsubscribe()};return operate(function(source,subscriber){refCount++,hasErrored||hasCompleted||cancelReset();var dest=subject=null!=subject?subject:connector();subscriber.add(function(){0!==--refCount||hasErrored||hasCompleted||(resetConnection=handleReset(resetAndUnsubscribe,resetOnRefCountZero))}),dest.subscribe(subscriber),!connection&&refCount>0&&(connection=new SafeSubscriber({next:function(value){return dest.next(value)},error:function(err){hasErrored=!0,cancelReset(),resetConnection=handleReset(reset,resetOnError,err),dest.error(err)},complete:function(){hasCompleted=!0,cancelReset(),resetConnection=handleReset(reset,resetOnComplete),dest.complete()}}),innerFrom(source).subscribe(connection))})(wrapperSource)}}function handleReset(reset,on){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];if(!0!==on){if(!1!==on){var onSubscriber=new SafeSubscriber({next:function(){onSubscriber.unsubscribe(),reset()}});return on.apply(void 0,__spreadArray([],__read(args))).subscribe(onSubscriber)}}else reset()}function shareReplay(configOrBufferSize,windowTime,scheduler){var _a,_b,_c,bufferSize,refCount=!1;return configOrBufferSize&&"object"==typeof configOrBufferSize?(_a=configOrBufferSize.bufferSize,bufferSize=void 0===_a?1/0:_a,_b=configOrBufferSize.windowTime,windowTime=void 0===_b?1/0:_b,refCount=void 0!==(_c=configOrBufferSize.refCount)&&_c,scheduler=configOrBufferSize.scheduler):bufferSize=null!=configOrBufferSize?configOrBufferSize:1/0,share({connector:function(){return new ReplaySubject(bufferSize,windowTime,scheduler)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:refCount})}var SequenceError=createErrorClass(function(_super){return function(message){_super(this),this.name="SequenceError",this.message=message}}),NotFoundError=createErrorClass(function(_super){return function(message){_super(this),this.name="NotFoundError",this.message=message}});function single(predicate){return operate(function(source,subscriber){var singleValue,hasValue=!1,seenValue=!1,index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){seenValue=!0,predicate&&!predicate(value,index++,source)||(hasValue&&subscriber.error(new SequenceError("Too many matching values")),hasValue=!0,singleValue=value)},function(){hasValue?(subscriber.next(singleValue),subscriber.complete()):subscriber.error(seenValue?new NotFoundError("No matching values"):new EmptyError)}))})}function skip(count){return filter(function(_,index){return count<=index})}function skipLast(skipCount){return skipCount<=0?identity:operate(function(source,subscriber){var ring=new Array(skipCount),seen=0;return source.subscribe(createOperatorSubscriber(subscriber,function(value){var valueIndex=seen++;if(valueIndex<skipCount)ring[valueIndex]=value;else{var index=valueIndex%skipCount,oldValue=ring[index];ring[index]=value,subscriber.next(oldValue)}})),function(){ring=null}})}function skipUntil(notifier){return operate(function(source,subscriber){var taking=!1,skipSubscriber=createOperatorSubscriber(subscriber,function(){null==skipSubscriber||skipSubscriber.unsubscribe(),taking=!0},noop);innerFrom(notifier).subscribe(skipSubscriber),source.subscribe(createOperatorSubscriber(subscriber,function(value){return taking&&subscriber.next(value)}))})}function skipWhile(predicate){return operate(function(source,subscriber){var taking=!1,index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){return(taking||(taking=!predicate(value,index++)))&&subscriber.next(value)}))})}function startWith(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];var scheduler=popScheduler(values);return operate(function(source,subscriber){(scheduler?concat(values,source,scheduler):concat(values,source)).subscribe(subscriber)})}function switchMap(project,resultSelector){return operate(function(source,subscriber){var innerSubscriber=null,index=0,isComplete=!1,checkComplete=function(){return isComplete&&!innerSubscriber&&subscriber.complete()};source.subscribe(createOperatorSubscriber(subscriber,function(value){null==innerSubscriber||innerSubscriber.unsubscribe();var innerIndex=0,outerIndex=index++;innerFrom(project(value,outerIndex)).subscribe(innerSubscriber=createOperatorSubscriber(subscriber,function(innerValue){return subscriber.next(resultSelector?resultSelector(value,innerValue,outerIndex,innerIndex++):innerValue)},function(){innerSubscriber=null,checkComplete()}))},function(){isComplete=!0,checkComplete()}))})}function switchAll(){return switchMap(identity)}function switchMapTo(innerObservable,resultSelector){return isFunction(resultSelector)?switchMap(function(){return innerObservable},resultSelector):switchMap(function(){return innerObservable})}function switchScan(accumulator,seed){return operate(function(source,subscriber){var state=seed;return switchMap(function(value,index){return accumulator(state,value,index)},function(_,innerValue){return state=innerValue,innerValue})(source).subscribe(subscriber),function(){state=null}})}function takeUntil(notifier){return operate(function(source,subscriber){innerFrom(notifier).subscribe(createOperatorSubscriber(subscriber,function(){return subscriber.complete()},noop)),!subscriber.closed&&source.subscribe(subscriber)})}function takeWhile(predicate,inclusive){return void 0===inclusive&&(inclusive=!1),operate(function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){var result=predicate(value,index++);(result||inclusive)&&subscriber.next(value),!result&&subscriber.complete()}))})}function tap(observerOrNext,error,complete){var tapObserver=isFunction(observerOrNext)||error||complete?{next:observerOrNext,error:error,complete:complete}:observerOrNext;return tapObserver?operate(function(source,subscriber){var _a;null===(_a=tapObserver.subscribe)||void 0===_a||_a.call(tapObserver);var isUnsub=!0;source.subscribe(createOperatorSubscriber(subscriber,function(value){var _a;null===(_a=tapObserver.next)||void 0===_a||_a.call(tapObserver,value),subscriber.next(value)},function(){var _a;isUnsub=!1,null===(_a=tapObserver.complete)||void 0===_a||_a.call(tapObserver),subscriber.complete()},function(err){var _a;isUnsub=!1,null===(_a=tapObserver.error)||void 0===_a||_a.call(tapObserver,err),subscriber.error(err)},function(){var _a,_b;isUnsub&&(null===(_a=tapObserver.unsubscribe)||void 0===_a||_a.call(tapObserver)),null===(_b=tapObserver.finalize)||void 0===_b||_b.call(tapObserver)}))}):identity}var defaultThrottleConfig={leading:!0,trailing:!1};function throttle(durationSelector,config){return void 0===config&&(config=defaultThrottleConfig),operate(function(source,subscriber){var leading=config.leading,trailing=config.trailing,hasValue=!1,sendValue=null,throttled=null,isComplete=!1,endThrottling=function(){null==throttled||throttled.unsubscribe(),throttled=null,trailing&&(send(),isComplete&&subscriber.complete())},cleanupThrottling=function(){throttled=null,isComplete&&subscriber.complete()},startThrottle=function(value){return throttled=innerFrom(durationSelector(value)).subscribe(createOperatorSubscriber(subscriber,endThrottling,cleanupThrottling))},send=function(){if(hasValue){hasValue=!1;var value=sendValue;sendValue=null,subscriber.next(value),!isComplete&&startThrottle(value)}};source.subscribe(createOperatorSubscriber(subscriber,function(value){hasValue=!0,sendValue=value,(!throttled||throttled.closed)&&(leading?send():startThrottle(value))},function(){isComplete=!0,(!(trailing&&hasValue&&throttled)||throttled.closed)&&subscriber.complete()}))})}function throttleTime(duration,scheduler,config){void 0===scheduler&&(scheduler=asyncScheduler),void 0===config&&(config=defaultThrottleConfig);var duration$=timer(duration,scheduler);return throttle(function(){return duration$},config)}function timeInterval(scheduler){return void 0===scheduler&&(scheduler=asyncScheduler),operate(function(source,subscriber){var last=scheduler.now();source.subscribe(createOperatorSubscriber(subscriber,function(value){var now=scheduler.now(),interval=now-last;last=now,subscriber.next(new TimeInterval(value,interval))}))})}var TimeInterval=function(value,interval){this.value=value,this.interval=interval},TimeoutError=createErrorClass(function(_super){return function(info){void 0===info&&(info=null),_super(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=info}});function timeout(config,schedulerArg){var _a=isValidDate(config)?{first:config}:"number"==typeof config?{each:config}:config,first=_a.first,each=_a.each,_b=_a.with,_with=void 0===_b?timeoutErrorFactory:_b,_c=_a.scheduler,scheduler=void 0===_c?null!=schedulerArg?schedulerArg:asyncScheduler:_c,_d=_a.meta,meta=void 0===_d?null:_d;if(null==first&&null==each)throw new TypeError("No timeout provided.");return operate(function(source,subscriber){var originalSourceSubscription,timerSubscription,lastValue=null,seen=0,startTimer=function(delay){timerSubscription=executeSchedule(subscriber,scheduler,function(){try{originalSourceSubscription.unsubscribe(),innerFrom(_with({meta:meta,lastValue:lastValue,seen:seen})).subscribe(subscriber)}catch(err){subscriber.error(err)}},delay)};originalSourceSubscription=source.subscribe(createOperatorSubscriber(subscriber,function(value){null==timerSubscription||timerSubscription.unsubscribe(),seen++,subscriber.next(lastValue=value),each>0&&startTimer(each)},void 0,void 0,function(){(null==timerSubscription?void 0:timerSubscription.closed)||null==timerSubscription||timerSubscription.unsubscribe(),lastValue=null})),!seen&&startTimer(null!=first?"number"==typeof first?first:+first-scheduler.now():each)})}function timeoutErrorFactory(info){throw new TimeoutError(info)}function timeoutWith(due,withObservable,scheduler){var first,each,_with;if(scheduler=null!=scheduler?scheduler:async,isValidDate(due)?first=due:"number"==typeof due&&(each=due),!withObservable)throw new TypeError("No observable provided to switch to");if(_with=function(){return withObservable},null==first&&null==each)throw new TypeError("No timeout provided.");return timeout({first:first,each:each,scheduler:scheduler,with:_with})}function timestamp(timestampProvider){return void 0===timestampProvider&&(timestampProvider=dateTimestampProvider),map(function(value){return{value:value,timestamp:timestampProvider.now()}})}function window(windowBoundaries){return operate(function(source,subscriber){var windowSubject=new Subject;subscriber.next(windowSubject.asObservable());var errorHandler=function(err){windowSubject.error(err),subscriber.error(err)};return source.subscribe(createOperatorSubscriber(subscriber,function(value){return null==windowSubject?void 0:windowSubject.next(value)},function(){windowSubject.complete(),subscriber.complete()},errorHandler)),windowBoundaries.subscribe(createOperatorSubscriber(subscriber,function(){windowSubject.complete(),subscriber.next(windowSubject=new Subject)},noop,errorHandler)),function(){null==windowSubject||windowSubject.unsubscribe(),windowSubject=null}})}function windowCount(windowSize,startWindowEvery){void 0===startWindowEvery&&(startWindowEvery=0);var startEvery=startWindowEvery>0?startWindowEvery:windowSize;return operate(function(source,subscriber){var windows=[new Subject],count=0;subscriber.next(windows[0].asObservable()),source.subscribe(createOperatorSubscriber(subscriber,function(value){var e_1,_a;try{for(var windows_1=__values(windows),windows_1_1=windows_1.next();!windows_1_1.done;windows_1_1=windows_1.next()){windows_1_1.value.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{windows_1_1&&!windows_1_1.done&&(_a=windows_1.return)&&_a.call(windows_1)}finally{if(e_1)throw e_1.error}}var c=count-windowSize+1;if(c>=0&&c%startEvery==0&&windows.shift().complete(),++count%startEvery==0){var window_2=new Subject;windows.push(window_2),subscriber.next(window_2.asObservable())}},function(){for(;windows.length>0;)windows.shift().complete();subscriber.complete()},function(err){for(;windows.length>0;)windows.shift().error(err);subscriber.error(err)},function(){null,windows=null}))})}function windowTime(windowTimeSpan){for(var _a,_b,otherArgs=[],_i=1;_i<arguments.length;_i++)otherArgs[_i-1]=arguments[_i];var scheduler=null!==(_a=popScheduler(otherArgs))&&void 0!==_a?_a:asyncScheduler,windowCreationInterval=null!==(_b=otherArgs[0])&&void 0!==_b?_b:null,maxWindowSize=otherArgs[1]||1/0;return operate(function(source,subscriber){var windowRecords=[],restartOnClose=!1,closeWindow=function(record){var window=record.window,subs=record.subs;window.complete(),subs.unsubscribe(),arrRemove(windowRecords,record),restartOnClose&&startWindow()},startWindow=function(){if(windowRecords){var subs=new Subscription;subscriber.add(subs);var window_1=new Subject,record_1={window:window_1,subs:subs,seen:0};windowRecords.push(record_1),subscriber.next(window_1.asObservable()),executeSchedule(subs,scheduler,function(){return closeWindow(record_1)},windowTimeSpan)}};null!==windowCreationInterval&&windowCreationInterval>=0?executeSchedule(subscriber,scheduler,startWindow,windowCreationInterval,!0):restartOnClose=!0,startWindow();var loop=function(cb){return windowRecords.slice().forEach(cb)},terminate=function(cb){loop(function(_a){var window=_a.window;return cb(window)}),cb(subscriber),subscriber.unsubscribe()};return source.subscribe(createOperatorSubscriber(subscriber,function(value){loop(function(record){record.window.next(value),maxWindowSize<=++record.seen&&closeWindow(record)})},function(){return terminate(function(consumer){return consumer.complete()})},function(err){return terminate(function(consumer){return consumer.error(err)})})),function(){windowRecords=null}})}function windowToggle(openings,closingSelector){return operate(function(source,subscriber){var windows=[],handleError=function(err){for(;0<windows.length;)windows.shift().error(err);subscriber.error(err)};innerFrom(openings).subscribe(createOperatorSubscriber(subscriber,function(openValue){var window=new Subject;windows.push(window);var closingNotifier,closingSubscription=new Subscription;try{closingNotifier=innerFrom(closingSelector(openValue))}catch(err){return void handleError(err)}subscriber.next(window.asObservable()),closingSubscription.add(closingNotifier.subscribe(createOperatorSubscriber(subscriber,function(){arrRemove(windows,window),window.complete(),closingSubscription.unsubscribe()},noop,handleError)))},noop)),source.subscribe(createOperatorSubscriber(subscriber,function(value){var e_1,_a,windowsCopy=windows.slice();try{for(var windowsCopy_1=__values(windowsCopy),windowsCopy_1_1=windowsCopy_1.next();!windowsCopy_1_1.done;windowsCopy_1_1=windowsCopy_1.next()){windowsCopy_1_1.value.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{windowsCopy_1_1&&!windowsCopy_1_1.done&&(_a=windowsCopy_1.return)&&_a.call(windowsCopy_1)}finally{if(e_1)throw e_1.error}}},function(){for(;0<windows.length;)windows.shift().complete();subscriber.complete()},handleError,function(){for(;0<windows.length;)windows.shift().unsubscribe()}))})}function windowWhen(closingSelector){return operate(function(source,subscriber){var window,closingSubscriber,handleError=function(err){window.error(err),subscriber.error(err)},openWindow=function(){var closingNotifier;null==closingSubscriber||closingSubscriber.unsubscribe(),null==window||window.complete(),window=new Subject,subscriber.next(window.asObservable());try{closingNotifier=innerFrom(closingSelector())}catch(err){return void handleError(err)}closingNotifier.subscribe(closingSubscriber=createOperatorSubscriber(subscriber,openWindow,openWindow,handleError))};openWindow(),source.subscribe(createOperatorSubscriber(subscriber,function(value){return window.next(value)},function(){window.complete(),subscriber.complete()},handleError,function(){null==closingSubscriber||closingSubscriber.unsubscribe(),window=null}))})}function withLatestFrom(){for(var inputs=[],_i=0;_i<arguments.length;_i++)inputs[_i]=arguments[_i];var project=popResultSelector(inputs);return operate(function(source,subscriber){for(var len=inputs.length,otherValues=new Array(len),hasValue=inputs.map(function(){return!1}),ready=!1,_loop_1=function(i){innerFrom(inputs[i]).subscribe(createOperatorSubscriber(subscriber,function(value){otherValues[i]=value,ready||hasValue[i]||(hasValue[i]=!0,(ready=hasValue.every(identity))&&(hasValue=null))},noop))},i=0;i<len;i++)_loop_1(i);source.subscribe(createOperatorSubscriber(subscriber,function(value){if(ready){var values=__spreadArray([value],__read(otherValues));subscriber.next(project?project.apply(void 0,__spreadArray([],__read(values))):values)}}))})}function zip$1(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var resultSelector=popResultSelector(args),sources=argsOrArgArray(args);return sources.length?new Observable(function(subscriber){var buffers=sources.map(function(){return[]}),completed=sources.map(function(){return!1});subscriber.add(function(){buffers=completed=null});for(var _loop_1=function(sourceIndex){innerFrom(sources[sourceIndex]).subscribe(createOperatorSubscriber(subscriber,function(value){if(buffers[sourceIndex].push(value),buffers.every(function(buffer){return buffer.length})){var result=buffers.map(function(buffer){return buffer.shift()});subscriber.next(resultSelector?resultSelector.apply(void 0,__spreadArray([],__read(result))):result),buffers.some(function(buffer,i){return!buffer.length&&completed[i]})&&subscriber.complete()}},function(){completed[sourceIndex]=!0,!buffers[sourceIndex].length&&subscriber.complete()}))},sourceIndex=0;!subscriber.closed&&sourceIndex<sources.length;sourceIndex++)_loop_1(sourceIndex);return function(){buffers=completed=null}}):EMPTY}function zip(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i]=arguments[_i];return operate(function(source,subscriber){zip$1.apply(void 0,__spreadArray([source],__read(sources))).subscribe(subscriber)})}function zipAll(project){return joinAllInternals(zip$1,project)}function zipWith(){for(var otherInputs=[],_i=0;_i<arguments.length;_i++)otherInputs[_i]=arguments[_i];return zip.apply(void 0,__spreadArray([],__read(otherInputs)))}export{audit,auditTime,buffer,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,combineLatestAll,combineLatestWith,concat$1 as concat,concatAll,concatMap,concatMapTo,concatWith,connect,count,debounce,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustAll,exhaustMap,expand,filter,finalize,find,findIndex,first,flatMap,groupBy,ignoreElements,isEmpty,last,map,mapTo,materialize,max,merge,mergeAll,mergeMap,mergeMapTo,mergeScan,mergeWith,min,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,raceWith,reduce,refCount,repeat,repeatWhen,retry,retryWhen,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,switchScan,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp,toArray,window,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll,zipWith};